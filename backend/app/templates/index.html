<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Tree Builder</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://unpkg.com/konva@9/konva.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar: Tree List -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Family Trees</h2>
                <button id="createTreeBtn" class="btn btn-primary">+ New Tree</button>
            </div>
            <div id="treeList" class="tree-list">
                <!-- Tree list will be populated here -->
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Toolbar -->
            <div class="toolbar">
                <div class="toolbar-group">
                    <button id="addPersonBtn" class="btn" title="Add Person">
                        ğŸ‘¤ Add Person
                    </button>
                    <button id="addLineBtn" class="btn" title="Connect with Line">
                        â†”ï¸ Add Line
                    </button>
                    <select id="lineStyleSelector" class="line-style-selector" title="Line Style" style="display:none;">
                        <option value="solid">Solid</option>
                        <option value="dashed">Dashed</option>
                    </select>
                    <button id="addNoteBtn" class="btn" title="Add Note">
                        ğŸ“ Add Note
                    </button>
                </div>
                <div class="toolbar-group">
                    <button id="addEmojiBtn" class="btn" title="Add Emoji">
                        ğŸ˜Š Add Emoji
                    </button>
                    <div id="emojiPicker" class="emoji-picker" style="display:none;">
                        <span class="emoji-item" data-emoji="â¤ï¸">â¤ï¸</span>
                        <span class="emoji-item" data-emoji="ğŸ’”">ğŸ’”</span>
                        <span class="emoji-item" data-emoji="ğŸ’•">ğŸ’•</span>
                        <span class="emoji-item" data-emoji="ğŸ’–">ğŸ’–</span>
                        <span class="emoji-item" data-emoji="ğŸ’—">ğŸ’—</span>
                        <span class="emoji-item" data-emoji="ğŸ’˜">ğŸ’˜</span>
                        <span class="emoji-item" data-emoji="ğŸ’™">ğŸ’™</span>
                        <span class="emoji-item" data-emoji="ğŸ’š">ğŸ’š</span>
                        <span class="emoji-item" data-emoji="ğŸ’›">ğŸ’›</span>
                        <span class="emoji-item" data-emoji="ğŸ§¡">ğŸ§¡</span>
                        <span class="emoji-item" data-emoji="ğŸ’œ">ğŸ’œ</span>
                        <span class="emoji-item" data-emoji="ğŸ–¤">ğŸ–¤</span>
                        <span class="emoji-item" data-emoji="ğŸ¤">ğŸ¤</span>
                        <span class="emoji-item" data-emoji="ğŸ¤">ğŸ¤</span>
                        <span class="emoji-item" data-emoji="ğŸ’">ğŸ’</span>
                        <span class="emoji-item" data-emoji="ğŸ’">ğŸ’</span>
                        <span class="emoji-item" data-emoji="ğŸ’Ÿ">ğŸ’Ÿ</span>
                        <span class="emoji-item" data-emoji="â£ï¸">â£ï¸</span>
                        <span class="emoji-item" data-emoji="ğŸ’Œ">ğŸ’Œ</span>
                        <span class="emoji-item" data-emoji="ğŸ’‹">ğŸ’‹</span>
                        <span class="emoji-item" data-emoji="ğŸ‘ª">ğŸ‘ª</span>
                        <span class="emoji-item" data-emoji="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</span>
                        <span class="emoji-item" data-emoji="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                        <span class="emoji-item" data-emoji="ğŸ‘¶">ğŸ‘¶</span>
                        <span class="emoji-item" data-emoji="ğŸ¼">ğŸ¼</span>
                        <span class="emoji-item" data-emoji="ğŸ‚">ğŸ‚</span>
                        <span class="emoji-item" data-emoji="ğŸ‰">ğŸ‰</span>
                        <span class="emoji-item" data-emoji="ğŸŠ">ğŸŠ</span>
                        <span class="emoji-item" data-emoji="ğŸˆ">ğŸˆ</span>
                        <span class="emoji-item" data-emoji="ğŸ">ğŸ</span>
                        <span class="emoji-item" data-emoji="ğŸ ">ğŸ </span>
                        <span class="emoji-item" data-emoji="ğŸ¡">ğŸ¡</span>
                        <span class="emoji-item" data-emoji="ğŸŒŸ">ğŸŒŸ</span>
                        <span class="emoji-item" data-emoji="â­">â­</span>
                        <span class="emoji-item" data-emoji="âœ¨">âœ¨</span>
                        <span class="emoji-item" data-emoji="ğŸŒ¹">ğŸŒ¹</span>
                        <span class="emoji-item" data-emoji="ğŸŒº">ğŸŒº</span>
                        <span class="emoji-item" data-emoji="ğŸŒ»">ğŸŒ»</span>
                        <span class="emoji-item" data-emoji="ğŸŒ·">ğŸŒ·</span>
                        <span class="emoji-item" data-emoji="ğŸŒ¸">ğŸŒ¸</span>
                        <span class="emoji-item" data-emoji="ğŸ’">ğŸ’</span>
                        <span class="emoji-item" data-emoji="ğŸŒˆ">ğŸŒˆ</span>
                        <span class="emoji-item" data-emoji="â˜€ï¸">â˜€ï¸</span>
                        <span class="emoji-item" data-emoji="ğŸŒ™">ğŸŒ™</span>
                        <span class="emoji-item" data-emoji="â›ª">â›ª</span>
                        <span class="emoji-item" data-emoji="ğŸ’’">ğŸ’’</span>
                        <span class="emoji-item" data-emoji="ğŸ’">ğŸ’</span>
                        <span class="emoji-item" data-emoji="ğŸ“·">ğŸ“·</span>
                        <span class="emoji-item" data-emoji="ğŸ“¸">ğŸ“¸</span>
                        <span class="emoji-item" data-emoji="ğŸ“š">ğŸ“š</span>
                        <span class="emoji-item" data-emoji="ğŸ“–">ğŸ“–</span>
                        <span class="emoji-item" data-emoji="âœï¸">âœï¸</span>
                        <span class="emoji-item" data-emoji="âœ¡ï¸">âœ¡ï¸</span>
                        <span class="emoji-item" data-emoji="â˜ªï¸">â˜ªï¸</span>
                        <span class="emoji-item" data-emoji="ğŸ•‰ï¸">ğŸ•‰ï¸</span>
                        <span class="emoji-item" data-emoji="â˜¸ï¸">â˜¸ï¸</span>
                        <span class="emoji-item" data-emoji="ğŸ“">ğŸ“</span>
                        <span class="emoji-item" data-emoji="ğŸ†">ğŸ†</span>
                        <span class="emoji-item" data-emoji="ğŸ¥‡">ğŸ¥‡</span>
                        <span class="emoji-item" data-emoji="ğŸ–ï¸">ğŸ–ï¸</span>
                        <span class="emoji-item" data-emoji="âš°ï¸">âš°ï¸</span>
                        <span class="emoji-item" data-emoji="ğŸª¦">ğŸª¦</span>
                        <span class="emoji-item" data-emoji="ğŸ•Šï¸">ğŸ•Šï¸</span>
                        <span class="emoji-item" data-emoji="ğŸ™">ğŸ™</span>
                        <span class="emoji-item" data-emoji="ğŸ˜Š">ğŸ˜Š</span>
                        <span class="emoji-item" data-emoji="ğŸ˜„">ğŸ˜„</span>
                        <span class="emoji-item" data-emoji="ğŸ˜¢">ğŸ˜¢</span>
                        <span class="emoji-item" data-emoji="ğŸ˜­">ğŸ˜­</span>
                        <span class="emoji-item" data-emoji="ğŸµ">ğŸµ</span>
                        <span class="emoji-item" data-emoji="ğŸ¶">ğŸ¶</span>
                    </div>
                </div>
                <div class="toolbar-group">
                    <button id="zoomInBtn" class="btn" title="Zoom In">
                        ğŸ”+ Zoom In
                    </button>
                    <button id="zoomOutBtn" class="btn" title="Zoom Out">
                        ğŸ”- Zoom Out
                    </button>
                    <button id="resetZoomBtn" class="btn" title="Reset Zoom">
                        ğŸ”„ Reset
                    </button>
                </div>
                <div class="toolbar-group">
                    <button id="saveBtn" class="btn btn-success" title="Save Tree">
                        ğŸ’¾ Save
                    </button>
                    <button id="deleteBtn" class="btn btn-danger" title="Delete Tree">
                        ğŸ—‘ï¸ Delete
                    </button>
                </div>
                <div class="toolbar-info">
                    <button id="darkModeToggle" class="btn" title="Toggle Dark Mode">
                        ğŸŒ™ Dark Mode
                    </button>
                    <span id="currentTreeName">No tree selected</span>
                    <span id="saveStatus" class="save-status"></span>
                </div>
            </div>

            <!-- Canvas -->
            <div id="canvasContainer" class="canvas-container">
                <div id="canvas"></div>
                <div id="noTreeMessage" class="no-tree-message">
                    <h2>Welcome to Family Tree Builder</h2>
                    <p>Create a new tree or select an existing one to get started.</p>
                </div>
            </div>
        </main>

        <!-- Right Panel: Properties Editor -->
        <aside class="properties-panel">
            <h3>Properties</h3>
            <div id="propertiesContent">
                <p class="no-selection">Select an item to edit its properties</p>
            </div>
        </aside>
    </div>

    <!-- Hidden file input for photo upload -->
    <input type="file" id="photoUpload" accept="image/*" style="display: none;">

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
